# -*- coding: utf-8 -*-
"""benchmark.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1a7BtkZtlENJnFQczvdZl34wayzvltJ_1
"""

import requests
import time

url = "https://31b814616928.ngrok-free.app/generate"
headers = {"Content-Type": "application/json"}
data = {"prompt": "भारत की स्वतंत्रता संग्राम"}

start = time.time()
response = requests.post(url, headers=headers, json=data)
end = time.time()

print("Status Code:", response.status_code)
print("Response:", response.json())
print("Latency (sec):", round(end - start, 4))

import requests
import time

url = "https://31b814616928.ngrok-free.app/generate"
headers = {"Content-Type": "application/json"}
data = {"prompt": "भारत की स्वतंत्रता संग्राम"}

num_requests = 5
start = time.time()

for i in range(num_requests):
    response = requests.post(url, headers=headers, json=data)
    print(f"Request {i+1}: {response.status_code} | Response time: {round(response.elapsed.total_seconds(), 2)} sec")

end = time.time()

total_time = round(end - start, 2)
print(f"\nTotal time for {num_requests} requests: {total_time} seconds")
print(f"Throughput: {round(num_requests / total_time, 2)} requests/sec")